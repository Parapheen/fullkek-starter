<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>{{ .AppName }}</title>
    <script src="/assets/scripts/htmx.min.js"></script>
    {{- if has "Basecoat" .Stack.Tags }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/basecoat-css@0.3.2/dist/basecoat.cdn.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/basecoat-css@0.3.2/dist/js/all.min.js" defer></script>
    {{- end }}
    {{- if has "Tailwind" .Stack.Tags }}
    <link rel="stylesheet" href="/assets/styles/output.css" />
    {{- end }}
  </head>
  <body class="bg-gray-50 flex flex-col min-h-screen">
    <main class="flex-grow">
      <header>
        <h1 class="text-center">Welcome to {{ .AppName }}</h1>
        <p>Interact with the server by wiring HTMX routes under internal/transport/http.</p>
        {{- if .Stack.HasFeature "auth-github-oauth2" }}
        <div id="auth-status" hx-get="/fragments/auth/status" hx-trigger="load" hx-swap="outerHTML"></div>
        {{- end }}
      </header>
      <section class="container mx-auto">
        <div class="grid gap-6 md:grid-cols-2">
          <div class="rounded-lg border bg-white p-4">
            <button class="stack-button" hx-get="/api/counter" hx-target="#examples" hx-swap="innerHTML">
              Load Counter (HTMX)
            </button>
            <div id="examples" class="mt-3">
              <!-- Render HTMX fragments here -->
            </div>
          </div>
          <div class="rounded-lg border bg-white p-4">
            <h2 class="font-semibold mb-2">CSRF-protected form demo</h2>
            <form method="post" action="/demo/echo" class="space-y-3">
              <label class="block text-sm" for="message">Message</label>
              <input id="message" name="message" type="text" class="w-full rounded border px-3 py-2" placeholder="Hello world" />
              <button class="stack-button" type="submit">Submit</button>
            </form>
            <p class="text-sm text-slate-600 mt-2">CSRF token is injected automatically via cookie and a hidden field.</p>
          </div>
        </div>
      </section>
      <footer class="flex flex-col items-center justify-center">
        <h2>Selected features</h2>
        <ul>
          {{ range .Stack.Features }}
          <li>{{ .Name }}</li>
          {{ end }}
        </ul>
      </footer>
    </main>
  </body>
  <script src="/assets/scripts/csrf.js" defer></script>
</html>
